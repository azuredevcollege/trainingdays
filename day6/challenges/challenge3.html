<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Challenge 3: Docker Objects | Azure Developer College</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/trainingdays/assets/css/0.styles.8d7a09fd.css" as="style"><link rel="preload" href="/trainingdays/assets/js/app.7ee90653.js" as="script"><link rel="preload" href="/trainingdays/assets/js/3.bac66e4c.js" as="script"><link rel="preload" href="/trainingdays/assets/js/64.608921b5.js" as="script"><link rel="prefetch" href="/trainingdays/assets/js/10.e245022a.js"><link rel="prefetch" href="/trainingdays/assets/js/11.e575ca81.js"><link rel="prefetch" href="/trainingdays/assets/js/12.4af6743d.js"><link rel="prefetch" href="/trainingdays/assets/js/13.0b26a6a5.js"><link rel="prefetch" href="/trainingdays/assets/js/14.2d92fef8.js"><link rel="prefetch" href="/trainingdays/assets/js/15.a191ca69.js"><link rel="prefetch" href="/trainingdays/assets/js/16.405c54e2.js"><link rel="prefetch" href="/trainingdays/assets/js/17.43731ef2.js"><link rel="prefetch" href="/trainingdays/assets/js/18.2984f726.js"><link rel="prefetch" href="/trainingdays/assets/js/19.a9d0edc3.js"><link rel="prefetch" href="/trainingdays/assets/js/2.0be5b509.js"><link rel="prefetch" href="/trainingdays/assets/js/20.7cffd4b4.js"><link rel="prefetch" href="/trainingdays/assets/js/21.e7fe4a64.js"><link rel="prefetch" href="/trainingdays/assets/js/22.9b14db9d.js"><link rel="prefetch" href="/trainingdays/assets/js/23.441bbca6.js"><link rel="prefetch" href="/trainingdays/assets/js/24.9c4549d9.js"><link rel="prefetch" href="/trainingdays/assets/js/25.5746a249.js"><link rel="prefetch" href="/trainingdays/assets/js/26.b54d0910.js"><link rel="prefetch" href="/trainingdays/assets/js/27.17fc5e8f.js"><link rel="prefetch" href="/trainingdays/assets/js/28.dc06e268.js"><link rel="prefetch" href="/trainingdays/assets/js/29.2c678e32.js"><link rel="prefetch" href="/trainingdays/assets/js/30.da2d71da.js"><link rel="prefetch" href="/trainingdays/assets/js/31.2d6231d3.js"><link rel="prefetch" href="/trainingdays/assets/js/32.de802251.js"><link rel="prefetch" href="/trainingdays/assets/js/33.e1098fb7.js"><link rel="prefetch" href="/trainingdays/assets/js/34.b6d29e40.js"><link rel="prefetch" href="/trainingdays/assets/js/35.4c61bb7b.js"><link rel="prefetch" href="/trainingdays/assets/js/36.336fcd60.js"><link rel="prefetch" href="/trainingdays/assets/js/37.772f2fe7.js"><link rel="prefetch" href="/trainingdays/assets/js/38.ba3ea198.js"><link rel="prefetch" href="/trainingdays/assets/js/39.52fb19ee.js"><link rel="prefetch" href="/trainingdays/assets/js/4.d015fbd5.js"><link rel="prefetch" href="/trainingdays/assets/js/40.354e399e.js"><link rel="prefetch" href="/trainingdays/assets/js/41.ec595a2b.js"><link rel="prefetch" href="/trainingdays/assets/js/42.48bed577.js"><link rel="prefetch" href="/trainingdays/assets/js/43.11938683.js"><link rel="prefetch" href="/trainingdays/assets/js/44.acddabd3.js"><link rel="prefetch" href="/trainingdays/assets/js/45.a2916451.js"><link rel="prefetch" href="/trainingdays/assets/js/46.95911633.js"><link rel="prefetch" href="/trainingdays/assets/js/47.c267ffc1.js"><link rel="prefetch" href="/trainingdays/assets/js/48.37cfbfe4.js"><link rel="prefetch" href="/trainingdays/assets/js/49.9fc08260.js"><link rel="prefetch" href="/trainingdays/assets/js/5.66f1ef82.js"><link rel="prefetch" href="/trainingdays/assets/js/50.f621e07d.js"><link rel="prefetch" href="/trainingdays/assets/js/51.e77f724a.js"><link rel="prefetch" href="/trainingdays/assets/js/52.c0052e39.js"><link rel="prefetch" href="/trainingdays/assets/js/53.2fe21a43.js"><link rel="prefetch" href="/trainingdays/assets/js/54.6d6dd706.js"><link rel="prefetch" href="/trainingdays/assets/js/55.de3427a7.js"><link rel="prefetch" href="/trainingdays/assets/js/56.357453fe.js"><link rel="prefetch" href="/trainingdays/assets/js/57.2b8c0b9b.js"><link rel="prefetch" href="/trainingdays/assets/js/58.34c86dce.js"><link rel="prefetch" href="/trainingdays/assets/js/59.20afb7e5.js"><link rel="prefetch" href="/trainingdays/assets/js/6.bd3d8f89.js"><link rel="prefetch" href="/trainingdays/assets/js/60.cf52ab3d.js"><link rel="prefetch" href="/trainingdays/assets/js/61.b7ff488e.js"><link rel="prefetch" href="/trainingdays/assets/js/62.2451e01f.js"><link rel="prefetch" href="/trainingdays/assets/js/63.d86a5b86.js"><link rel="prefetch" href="/trainingdays/assets/js/65.d90b3114.js"><link rel="prefetch" href="/trainingdays/assets/js/66.49c6fbd9.js"><link rel="prefetch" href="/trainingdays/assets/js/67.4f60f26b.js"><link rel="prefetch" href="/trainingdays/assets/js/68.208402a2.js"><link rel="prefetch" href="/trainingdays/assets/js/69.a980b450.js"><link rel="prefetch" href="/trainingdays/assets/js/7.fc9a0f7c.js"><link rel="prefetch" href="/trainingdays/assets/js/70.cf4f53b8.js"><link rel="prefetch" href="/trainingdays/assets/js/71.55c061b2.js"><link rel="prefetch" href="/trainingdays/assets/js/72.7cc4b8ba.js"><link rel="prefetch" href="/trainingdays/assets/js/73.71f272fd.js"><link rel="prefetch" href="/trainingdays/assets/js/74.d9324332.js"><link rel="prefetch" href="/trainingdays/assets/js/75.22202aba.js"><link rel="prefetch" href="/trainingdays/assets/js/76.79e1fda3.js"><link rel="prefetch" href="/trainingdays/assets/js/77.09f6ecf5.js"><link rel="prefetch" href="/trainingdays/assets/js/78.40383fd1.js"><link rel="prefetch" href="/trainingdays/assets/js/79.c5447221.js"><link rel="prefetch" href="/trainingdays/assets/js/8.45342290.js"><link rel="prefetch" href="/trainingdays/assets/js/80.5cf25ae5.js"><link rel="prefetch" href="/trainingdays/assets/js/81.e3653e94.js"><link rel="prefetch" href="/trainingdays/assets/js/82.e34ef379.js"><link rel="prefetch" href="/trainingdays/assets/js/83.a86bfa1d.js"><link rel="prefetch" href="/trainingdays/assets/js/84.147161c7.js"><link rel="prefetch" href="/trainingdays/assets/js/85.ee46661f.js"><link rel="prefetch" href="/trainingdays/assets/js/86.b933c088.js"><link rel="prefetch" href="/trainingdays/assets/js/87.0b4539ef.js"><link rel="prefetch" href="/trainingdays/assets/js/9.235ee99d.js">
    <link rel="stylesheet" href="/trainingdays/assets/css/0.styles.8d7a09fd.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/trainingdays/" class="home-link router-link-active"><!----> <span class="site-name">Azure Developer College</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/azuredevcollege/trainingdays" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/azuredevcollege/trainingdays" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/trainingdays/" aria-current="page" class="sidebar-link">Home</a></li><li><a href="/trainingdays/day1/" class="sidebar-link">Day 1 Azure Fundamentals &amp; Infrastructure</a></li><li><a href="/trainingdays/day2/" class="sidebar-link">Day 2 Azure Development</a></li><li><a href="/trainingdays/day3/" class="sidebar-link">Day 3 Data and AI</a></li><li><a href="/trainingdays/day4/" class="sidebar-link">Day 4 DevOps and Monitoring</a></li><li><a href="/trainingdays/day5/" class="sidebar-link">Day 5 Identity and Architecture</a></li><li><a href="/trainingdays/day6/" aria-current="page" class="sidebar-link">Day 6 Containerization</a></li><li><a href="/trainingdays/day7/" class="sidebar-link">Day 7 Kubernetes</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="challenge-3-docker-objects"><a href="#challenge-3-docker-objects" class="header-anchor">#</a> Challenge 3: Docker Objects</h1> <h2 id="here-is-what-you-ll-learn"><a href="#here-is-what-you-ll-learn" class="header-anchor">#</a> Here is what you'll learn</h2> <ul><li>Creating Volumes</li> <li>Inspecting Volumes</li> <li>Creating Networks</li> <li>Checking connection differences between different networks</li></ul> <p>In this challenge, we're gonna play with Volume and Network objects which are the most important Docker objects after Images and Containers.</p> <h2 id="exercises"><a href="#exercises" class="header-anchor">#</a> Exercises</h2> <p><strong>1: Creating the first volume</strong></p><details><summary>Click to expand!</summary><p></p> <p>Docker volumes are docker objects, just like containers and images. We create them just like creating images or containers. By default, we create them on the host where Docker daemon is running. But if we want, they can be created using various volume plug-ins and these plug-ins allow us to store the data, for example on a nfs drive or on the cloud.
After the volume is created, we can mount that volume to any folder inside the container. From that moment, any files written to that folder will be physically stored in the volume. This way, we can keep these files longer than the container's lifetime. Any file in the container is deleted and lost, when container is deleted. Volumes allow us to keep files independent of containers' lifetime. Let's create our first volume and see that in action.</p> <p>First let's check if there is any volume has been created on the host before.</p> <p>Type:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$  <span class="token function">docker</span> volume <span class="token function">ls</span>
</code></pre></div><p>Output will be something like:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>DRIVER              VOLUME NAME
</code></pre></div><p>We don't have any volume at the moment. Let's create the first one. For that, we're gonna use <code>docker volume create</code> command without any option. If we want to use any specific volume driver, we would use <code>-d</code> option but we want to create a local volume so we don't have to specify a driver.</p> <p>Type:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$  <span class="token function">docker</span> volume create first_volume
</code></pre></div><p>Output will be something like:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>first_volume
</code></pre></div><p>We've just created our first volume. Now it's time to inspect it and see the details.</p> <p>Type:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">docker</span> volume inspect first_volume
</code></pre></div><p>Output will be something like:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        <span class="token string">&quot;CreatedAt&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;2020-06-04T13:33:47Z&quot;</span>,
        <span class="token string">&quot;Driver&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;local&quot;</span>,
        <span class="token string">&quot;Labels&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>,
        <span class="token string">&quot;Mountpoint&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;/var/lib/docker/volumes/first_volume/_data&quot;</span>,
        <span class="token string">&quot;Name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;first_volume&quot;</span>,
        <span class="token string">&quot;Options&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>,
        <span class="token string">&quot;Scope&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;local&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><p>I want you to pay attention to  <code>&quot;Mountpoint&quot;:</code> section of this output. This is literally the path where this volume is located. Any file in this volume is actually stored in this path. Docker Desktop for Windows and Docker Desktop for Mac spin up a lightweight vm and run Docker daemon inside that. Therefore we can't access to this path but if you run Docker daemon on any Linux VM, cd to that path and you can see the files stored in it. Ok, now we have an empty volume. We can mount that volume to a container. It's really easy. The option that we'll use is <code>-v</code> and the rule is always <code>volume-name</code> <code>:</code> <code>container-path</code>. Let's say we want to mount the volume called <code>first_volume</code> to the folder <code>/test</code>. Our option would be <code>-v first_volume:/test</code>. If this folder doesn't exist in the image, the folder will be created when container is created.</p> <p>Now it's time to create a container and mount that volume. We're gonna create a new interactive container from ubuntu image and connect to its bash shell. <code>first_volume</code> will be mounted to container's <code>/test</code> folder. After it's created, we'll switch to <code>/test</code> directory and create a file called <code>test.txt</code> and exit.</p> <p>(We will use another useful option too, which is <code>--rm</code>. If you create a Docker container with <code>--rm</code>, the container will be automatically deleted when it's exited. Therefore you don't need to manually clean later. Please use with caution.)</p> <p>Type:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">docker</span> container run <span class="token parameter variable">-it</span> <span class="token parameter variable">--rm</span> <span class="token parameter variable">-v</span> first_volume:/test ubuntu <span class="token function">bash</span>
</code></pre></div><p>Output will be something like:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>root@666540d6384b:/<span class="token comment">#</span>
</code></pre></div><p>Now we're connected to the container. Let's jump to the /test folder and create a file in it.</p> <div class="language-shell extra-class"><pre class="language-shell"><code>root@666540d6384b:/<span class="token comment"># cd /test</span>
root@666540d6384b:/test<span class="token comment"># echo &quot;this is a test line&quot; &gt; test.txt</span>
root@666540d6384b:/test<span class="token comment"># ls</span>
test.txt
root@666540d6384b:/test<span class="token comment"># exit</span>
<span class="token builtin class-name">exit</span>
</code></pre></div><p>When we exited, the container stopped working. We created that container with <code>--rm</code> therefore container is deleted too. You can check this by typing <code>docker ps -a</code>. There shouldn't be any running or stopped container at the moment. <code>first_volume</code> has been mounted to this container's <code>/test</code> folder. Therefore anything was written to that folder actually was written to the volume. Container was deleted but volume still remains. So our data too. Let's create another container and see that. This time we're gonna create another container from alpine image to see that it doesn't matter which image we use.</p> <p>Type:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">docker</span> container run <span class="token parameter variable">-it</span> <span class="token parameter variable">--rm</span> <span class="token parameter variable">-v</span> first_volume:/test2 alpine <span class="token function">sh</span>
</code></pre></div><p>Output will be something like:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>Unable to <span class="token function">find</span> image <span class="token string">'alpine:latest'</span> locally
latest: Pulling from library/alpine
df20fa9351a1: Pull complete
Digest: sha256:185518070891758909c9f839cf4ca393ee977ac378609f700f60a771a2dfe321
Status: Downloaded newer image <span class="token keyword">for</span> alpine:latest
/ <span class="token comment">#</span>
</code></pre></div><p>We're connected to the container. Let's jump to the <code>/test2</code> folder and check if file is there.</p> <div class="language-shell extra-class"><pre class="language-shell"><code>/ <span class="token comment"># cd /test2</span>
/test2 <span class="token comment"># ls</span>
test.txt
/test2 <span class="token comment"># cat test.txt</span>
this is a <span class="token builtin class-name">test</span> line
/test2 <span class="token comment"># exit</span>
</code></pre></div><p>Yes! The file is there. As you can see, we kept our data longer than the container's lifetime. Don't forget, containers are disposable and can be deleted but your data doesn't need to be.
</p></details><p></p> <hr> <p><strong>2: Other volume options</strong></p><details><summary>Click to expand!</summary><p></p> <p>Another use case of the volumes is that you can mount the same volume to multiple containers at the same time. Let's try that.</p> <p>Type:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">docker</span> container run <span class="token parameter variable">-it</span> <span class="token parameter variable">--rm</span> <span class="token parameter variable">--name</span> con1 <span class="token parameter variable">-v</span> first_volume:/test ubuntu <span class="token function">bash</span>
</code></pre></div><p>Output will be something like:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>root@70fd46786a11:/<span class="token comment">#</span>
</code></pre></div><p>We've created a new container and connected to its bash shell. Also <code>first_volume</code> is mounted to the <code>/test</code> folder. While this is running let's open a 2nd terminal window and create another container and mount the same volume too.</p> <p>Type:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">docker</span> container run <span class="token parameter variable">-it</span> <span class="token parameter variable">--rm</span> <span class="token parameter variable">--name</span> con2 <span class="token parameter variable">-v</span> first_volume:/test2 ubuntu <span class="token function">bash</span>
</code></pre></div><p>Output will be something like:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>root@7c697541e9ed:/<span class="token comment">#</span>
</code></pre></div><p>Now we have 2 containers. con1 and con2. <code>first_volume</code> is mounted to con1's <code>/test</code> folder and also it's mounted to con2's <code>/test2</code> folder. Let's create a file in the <code>/test2</code> folder at con2.</p> <div class="language-shell extra-class"><pre class="language-shell"><code>root@7c697541e9ed:/<span class="token comment"># cd /test2</span>
root@7c697541e9ed:/test2<span class="token comment"># touch from-con2.txt</span>
root@7c697541e9ed:/test2<span class="token comment"># ls</span>
from-con2.txt  test.txt
root@7c697541e9ed:/test2<span class="token comment">#</span>
</code></pre></div><p>After that just turn back to 1st terminal window. It's connected to con1's bash shell. Jump to the <code>/test</code> folder and see that file is seen from there too.</p> <div class="language-shell extra-class"><pre class="language-shell"><code>root@70fd46786a11:/<span class="token comment"># cd /test</span>
root@70fd46786a11:/test<span class="token comment"># ls</span>
from-con2.txt  test.txt
root@70fd46786a11:/test<span class="token comment">#</span>
</code></pre></div><p>This time, we'll create another container and mount <code>first_volume</code> to <code>/test3</code> folder but this time the volume will be mounted read only. For that, we're gonna use <code>:ro</code> option. Open another terminal window and;</p> <p>Type:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">docker</span> container run <span class="token parameter variable">-it</span> <span class="token parameter variable">--rm</span> <span class="token parameter variable">--name</span> con3 <span class="token parameter variable">-v</span> first_volume:/test3:ro ubuntu <span class="token function">bash</span>
</code></pre></div><p>Output will be something like:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>root@0f00f388b5e8:/<span class="token comment">#</span>
</code></pre></div><p>cd to <code>/test3</code> and try to create or delete any file. You're gonna get an error message because volume is mounted as read-only.</p> <div class="language-shell extra-class"><pre class="language-shell"><code>root@0f00f388b5e8:/<span class="token comment"># cd /test3</span>
root@0f00f388b5e8:/test3<span class="token comment"># ls</span>
from-con2.txt  test.txt
root@0f00f388b5e8:/test3<span class="token comment"># rm test.txt</span>
rm: cannot remove <span class="token string">'test.txt'</span><span class="token builtin class-name">:</span> Read-only <span class="token function">file</span> system
root@0f00f388b5e8:/test3<span class="token comment"># touch newfile.txt</span>
touch: cannot <span class="token function">touch</span> <span class="token string">'newfile.txt'</span><span class="token builtin class-name">:</span> Read-only <span class="token function">file</span> system
root@0f00f388b5e8:/test3<span class="token comment">#</span>
</code></pre></div><p>Type <code>exit</code> in all 3 terminals. This will close the containers and they'll be automatically deleted. But volume will not be deleted. Therefore we're gonna keep the files that we need. But now, we're done our exercise so we can delete this volume too.</p> <p>Type:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">docker</span> volume <span class="token function">rm</span> first_volume
</code></pre></div><p>Output will be something like:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>first_volume
</code></pre></div></details> <hr> <p><strong>3: Default networks - Bridge</strong></p><details><summary>Click to expand!</summary><p></p> <p>Let's get started. First we're gonna list current network objects.</p> <p>Type:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">docker</span> network <span class="token function">ls</span>
</code></pre></div><p>Output will be something like:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>NETWORK ID          NAME                DRIVER              SCOPE
0a63e660c39f        bridge              bridge              <span class="token builtin class-name">local</span>
a4c8780d68f4        <span class="token function">host</span>                <span class="token function">host</span>                <span class="token builtin class-name">local</span>
3f2520a5781c        none                null                <span class="token builtin class-name">local</span>
</code></pre></div><p>When Docker engine is installed, a default bridge network (also called bridge) is created automatically and newly-started containers connect to it unless otherwise specified. In addition to that, two other networks are created too. Which are host and none.</p> <p>All containers without a <code>--network</code> option specified are attached to the default bridge network. Containers on the default bridge network can access each other by their IP addresses. You can also create user-defined custom bridge networks. But we'll come to that later. For now, let's inspect the default bridge network.</p> <p>Type:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">docker</span> network inspect bridge
</code></pre></div><p>Output will be something like:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        <span class="token string">&quot;Name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;bridge&quot;</span>,
        <span class="token string">&quot;Id&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;0a63e660c39f21b42b1c7722edf80667036af813820a743e900b65cf4d245314&quot;</span>,
        <span class="token string">&quot;Created&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;2020-07-29T18:01:01.192938Z&quot;</span>,
        <span class="token string">&quot;Scope&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;local&quot;</span>,
        <span class="token string">&quot;Driver&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;bridge&quot;</span>,
        <span class="token string">&quot;EnableIPv6&quot;</span><span class="token builtin class-name">:</span> false,
        <span class="token string">&quot;IPAM&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;Driver&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;default&quot;</span>,
            <span class="token string">&quot;Options&quot;</span><span class="token builtin class-name">:</span> null,
            <span class="token string">&quot;Config&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">{</span>
                    <span class="token string">&quot;Subnet&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;172.17.0.0/16&quot;</span>,
                    <span class="token string">&quot;Gateway&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;172.17.0.1&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>,
        <span class="token string">&quot;Internal&quot;</span><span class="token builtin class-name">:</span> false,
        <span class="token string">&quot;Attachable&quot;</span><span class="token builtin class-name">:</span> false,
        <span class="token string">&quot;Ingress&quot;</span><span class="token builtin class-name">:</span> false,
        <span class="token string">&quot;ConfigFrom&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;Network&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>
        <span class="token punctuation">}</span>,
        <span class="token string">&quot;ConfigOnly&quot;</span><span class="token builtin class-name">:</span> false,
        <span class="token string">&quot;Containers&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>,
        <span class="token string">&quot;Options&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;com.docker.network.bridge.default_bridge&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;true&quot;</span>,
            <span class="token string">&quot;com.docker.network.bridge.enable_icc&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;true&quot;</span>,
            <span class="token string">&quot;com.docker.network.bridge.enable_ip_masquerade&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;true&quot;</span>,
            <span class="token string">&quot;com.docker.network.bridge.host_binding_ipv4&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;0.0.0.0&quot;</span>,
            <span class="token string">&quot;com.docker.network.bridge.name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;docker0&quot;</span>,
            <span class="token string">&quot;com.docker.network.driver.mtu&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;1500&quot;</span>
        <span class="token punctuation">}</span>,
        <span class="token string">&quot;Labels&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><p>&quot;Subnet&quot; is &quot;172.17.0.0/16&quot; and &quot;Gateway&quot; is &quot;172.17.0.1&quot;. This means that all containers without a <code>--network</code> specified will be attached to this bridge network and get an ip address from that subnet. Also each container that are connected to this network can communicate with each other. It's time to try that. First we're gonna create 2 containers with <code>-d</code> and <code>-it</code> options, in short <code>-dit</code>. This allows us to create a container interactive and connected &quot;-it&quot; but also detached &quot;-d&quot;. So connection will be opened to this container but we'll get our terminal back. In this way, we can continue to work.</p> <p>Type:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">docker</span> container run <span class="token parameter variable">-dit</span> <span class="token parameter variable">--rm</span> <span class="token parameter variable">--name</span> con1 ubuntu <span class="token function">bash</span>
</code></pre></div><p>Output will be something like:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>bb1dcc608811c3d7d5dd63f09fc23424bb188c2053df618861887321c8043cee
</code></pre></div><p>Type:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">docker</span> container run <span class="token parameter variable">-dit</span> <span class="token parameter variable">--rm</span> <span class="token parameter variable">--name</span> con2 ubuntu <span class="token function">bash</span>
</code></pre></div><p>Output will be something like:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>f89a73c7d38d6bad0d14b68cc629e8e4fd2f32e8f274ce20cbbb8f116efe5887
</code></pre></div><p>In the mean time we're gonna learn another docker command which is <code>docker attach</code>. This command allows us to attach our terminal’s standard input, output, and error (or any combination of the three) to a running container using the container’s ID or name. This allows us to see its ongoing output or control it interactively, as though the commands were running directly in your terminal. This is how we will attach to running connection on these containers. But before that let's inspect the bridge network object one more time.</p> <p>Type:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">docker</span> network inspect bridge
</code></pre></div><p>Output will be something like:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        <span class="token string">&quot;Name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;bridge&quot;</span>,
        <span class="token string">&quot;Id&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;0a63e660c39f21b42b1c7722edf80667036af813820a743e900b65cf4d245314&quot;</span>,
        <span class="token string">&quot;Created&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;2020-07-29T18:01:01.192938Z&quot;</span>,
        <span class="token string">&quot;Scope&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;local&quot;</span>,
        <span class="token string">&quot;Driver&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;bridge&quot;</span>,
        <span class="token string">&quot;EnableIPv6&quot;</span><span class="token builtin class-name">:</span> false,
        <span class="token string">&quot;IPAM&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;Driver&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;default&quot;</span>,
            <span class="token string">&quot;Options&quot;</span><span class="token builtin class-name">:</span> null,
            <span class="token string">&quot;Config&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">{</span>
                    <span class="token string">&quot;Subnet&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;172.17.0.0/16&quot;</span>,
                    <span class="token string">&quot;Gateway&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;172.17.0.1&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>,
        <span class="token string">&quot;Internal&quot;</span><span class="token builtin class-name">:</span> false,
        <span class="token string">&quot;Attachable&quot;</span><span class="token builtin class-name">:</span> false,
        <span class="token string">&quot;Ingress&quot;</span><span class="token builtin class-name">:</span> false,
        <span class="token string">&quot;ConfigFrom&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;Network&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>
        <span class="token punctuation">}</span>,
        <span class="token string">&quot;ConfigOnly&quot;</span><span class="token builtin class-name">:</span> false,
        <span class="token string">&quot;Containers&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;bb1dcc608811c3d7d5dd63f09fc23424bb188c2053df618861887321c8043cee&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;Name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;con1&quot;</span>,
                <span class="token string">&quot;EndpointID&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;76ca82059a18dad551283a9a8804791bea97138065d1ec8f104381a9d79a6454&quot;</span>,
                <span class="token string">&quot;MacAddress&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;02:42:ac:11:00:02&quot;</span>,
                <span class="token string">&quot;IPv4Address&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;172.17.0.2/16&quot;</span>,
                <span class="token string">&quot;IPv6Address&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>
            <span class="token punctuation">}</span>,
            <span class="token string">&quot;f89a73c7d38d6bad0d14b68cc629e8e4fd2f32e8f274ce20cbbb8f116efe5887&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;Name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;con2&quot;</span>,
                <span class="token string">&quot;EndpointID&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;844f3d3c8f07e29170c8742ed59ea47b0bb01bb80c25e36122eaa981a2c1322e&quot;</span>,
                <span class="token string">&quot;MacAddress&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;02:42:ac:11:00:03&quot;</span>,
                <span class="token string">&quot;IPv4Address&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;172.17.0.3/16&quot;</span>,
                <span class="token string">&quot;IPv6Address&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>,
        <span class="token string">&quot;Options&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;com.docker.network.bridge.default_bridge&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;true&quot;</span>,
            <span class="token string">&quot;com.docker.network.bridge.enable_icc&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;true&quot;</span>,
            <span class="token string">&quot;com.docker.network.bridge.enable_ip_masquerade&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;true&quot;</span>,
            <span class="token string">&quot;com.docker.network.bridge.host_binding_ipv4&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;0.0.0.0&quot;</span>,
            <span class="token string">&quot;com.docker.network.bridge.name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;docker0&quot;</span>,
            <span class="token string">&quot;com.docker.network.driver.mtu&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;1500&quot;</span>
        <span class="token punctuation">}</span>,
        <span class="token string">&quot;Labels&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><p>This time, container section of the output is not empty. We have created two containers. They're still running. And we didn't use <code>--network</code> when we created them so they both are connected to default bridge network. You can see their names, ids and ip addresses above. Let's attach to <code>con1</code> and check the network details.</p> <p>Type:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">docker</span> attach con1
</code></pre></div><p>Output will be something like:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>root@bb1dcc608811:/<span class="token comment">#</span>
</code></pre></div><p>We are in con1. First we're gonna check network details by typing ifconfig but when you do that, you will get an error &quot;bash: ifconfig: command not found&quot;. Another important thing you have to know about container images is that most of them are minimal builds and don't have even most used basic tools like ifconfig and ping. We need to install that first.</p> <p>Type:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>root@bb1dcc608811:/<span class="token comment"># apt update -y &amp;&amp; apt install -y net-tools iputils-ping</span>
</code></pre></div><p>Output will be something like:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>root@bb1dcc608811:/<span class="token comment">#</span>
</code></pre></div><p>We've installed ifconfig and ping utilities. Now we can check the container's ip address.</p> <p>Type:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>root@bb1dcc608811:/<span class="token comment"># ifconfig</span>
</code></pre></div><p>Output will be something like:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>eth0: <span class="token assign-left variable">flags</span><span class="token operator">=</span><span class="token number">416</span><span class="token operator"><span class="token file-descriptor important">3</span>&lt;</span>UP,BROADCAST,RUNNING,MULTICAST<span class="token operator">&gt;</span>  mtu <span class="token number">1500</span>
        inet <span class="token number">172.17</span>.0.2  netmask <span class="token number">255.255</span>.0.0  broadcast <span class="token number">172.17</span>.255.255
        ether 02:42:ac:11:00:02  txqueuelen <span class="token number">0</span>  <span class="token punctuation">(</span>Ethernet<span class="token punctuation">)</span>
        RX packets <span class="token number">10482</span>  bytes <span class="token number">15220468</span> <span class="token punctuation">(</span><span class="token number">15.2</span> MB<span class="token punctuation">)</span>
        RX errors <span class="token number">0</span>  dropped <span class="token number">0</span>  overruns <span class="token number">0</span>  frame <span class="token number">0</span>
        TX packets <span class="token number">4994</span>  bytes <span class="token number">274694</span> <span class="token punctuation">(</span><span class="token number">274.6</span> KB<span class="token punctuation">)</span>
        TX errors <span class="token number">0</span>  dropped <span class="token number">0</span> overruns <span class="token number">0</span>  carrier <span class="token number">0</span>  collisions <span class="token number">0</span>

lo: <span class="token assign-left variable">flags</span><span class="token operator">=</span><span class="token number">7</span><span class="token operator"><span class="token file-descriptor important">3</span>&lt;</span>UP,LOOPBACK,RUNNING<span class="token operator">&gt;</span>  mtu <span class="token number">65536</span>
        inet <span class="token number">127.0</span>.0.1  netmask <span class="token number">255.0</span>.0.0
        loop  txqueuelen <span class="token number">1000</span>  <span class="token punctuation">(</span>Local Loopback<span class="token punctuation">)</span>
        RX packets <span class="token number">0</span>  bytes <span class="token number">0</span> <span class="token punctuation">(</span><span class="token number">0.0</span> B<span class="token punctuation">)</span>
        RX errors <span class="token number">0</span>  dropped <span class="token number">0</span>  overruns <span class="token number">0</span>  frame <span class="token number">0</span>
        TX packets <span class="token number">0</span>  bytes <span class="token number">0</span> <span class="token punctuation">(</span><span class="token number">0.0</span> B<span class="token punctuation">)</span>
        TX errors <span class="token number">0</span>  dropped <span class="token number">0</span> overruns <span class="token number">0</span>  carrier <span class="token number">0</span>  collisions <span class="token number">0</span>
</code></pre></div><p>As you can see, con1 got an ip address &quot;172.17.0.2&quot;. Let's try to ping con2. Ip address of con2 is 172.17.0.3.</p> <p>Type:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>root@bb1dcc608811:/<span class="token comment"># ping -c 4 172.17.0.3</span>
</code></pre></div><p>Output will be something like:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>PING <span class="token number">172.17</span>.0.3 <span class="token punctuation">(</span><span class="token number">172.17</span>.0.3<span class="token punctuation">)</span> <span class="token number">56</span><span class="token punctuation">(</span><span class="token number">84</span><span class="token punctuation">)</span> bytes of data.
<span class="token number">64</span> bytes from <span class="token number">172.17</span>.0.3: <span class="token assign-left variable">icmp_seq</span><span class="token operator">=</span><span class="token number">1</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">64</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">4.85</span> ms
<span class="token number">64</span> bytes from <span class="token number">172.17</span>.0.3: <span class="token assign-left variable">icmp_seq</span><span class="token operator">=</span><span class="token number">2</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">64</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">0.105</span> ms
<span class="token number">64</span> bytes from <span class="token number">172.17</span>.0.3: <span class="token assign-left variable">icmp_seq</span><span class="token operator">=</span><span class="token number">3</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">64</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">0.090</span> ms
<span class="token number">64</span> bytes from <span class="token number">172.17</span>.0.3: <span class="token assign-left variable">icmp_seq</span><span class="token operator">=</span><span class="token number">4</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">64</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">0.156</span> ms

--- <span class="token number">172.17</span>.0.3 <span class="token function">ping</span> statistics ---
<span class="token number">4</span> packets transmitted, <span class="token number">4</span> received, <span class="token number">0</span>% packet loss, <span class="token function">time</span> 3086ms
rtt min/avg/max/mdev <span class="token operator">=</span> <span class="token number">0.090</span>/1.299/4.848/2.048 ms
</code></pre></div><p>It seems that connection between con1 and con2 is possible. Because they're connected to the same default bridge network. They can communicate directly without exposing their ports. They're on the same network and there isn't any rule that blocks this communication. But I wonder if they can solve each other's name too? Is there any dns mechanism running behind the scenes? Let's try that. First we're gonna try to ping www.bing.com and see if container can solve public domain names.</p> <p>Type:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>root@bb1dcc608811:/<span class="token comment"># ping -c 2 www.bing.com</span>
</code></pre></div><p>Output will be something like:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>PING dual-a-0001.a-msedge.net <span class="token punctuation">(</span><span class="token number">13.107</span>.21.200<span class="token punctuation">)</span> <span class="token number">56</span><span class="token punctuation">(</span><span class="token number">84</span><span class="token punctuation">)</span> bytes of data.
<span class="token number">64</span> bytes from <span class="token number">13.107</span>.21.200 <span class="token punctuation">(</span><span class="token number">13.107</span>.21.200<span class="token punctuation">)</span>: <span class="token assign-left variable">icmp_seq</span><span class="token operator">=</span><span class="token number">1</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">37</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">11.4</span> ms
<span class="token number">64</span> bytes from <span class="token number">13.107</span>.21.200 <span class="token punctuation">(</span><span class="token number">13.107</span>.21.200<span class="token punctuation">)</span>: <span class="token assign-left variable">icmp_seq</span><span class="token operator">=</span><span class="token number">2</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">37</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">15.1</span> ms

--- dual-a-0001.a-msedge.net <span class="token function">ping</span> statistics ---
<span class="token number">2</span> packets transmitted, <span class="token number">2</span> received, <span class="token number">0</span>% packet loss, <span class="token function">time</span> 1002ms
rtt min/avg/max/mdev <span class="token operator">=</span> <span class="token number">11.420</span>/13.259/15.099/1.839 ms
</code></pre></div><p>Yes it's working. Now let's try to ping con2.</p> <p>Type:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>root@bb1dcc608811:/<span class="token comment"># ping -c 2 con2</span>
</code></pre></div><p>Output will be something like:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>ping: con2: Name or <span class="token function">service</span> not known
</code></pre></div><p>Containers on the default bridge network can only access each other by their IP addresses, unless you use the --link option, which is considered legacy. On a user-defined bridge network, containers can resolve each other by name or alias. That's the main benefit of user defined bridge networks. In addition to that using a user-defined network provides a scoped network in which only containers attached to that network are able to communicate. We'll come to that later.</p> <p>You can detach from a container and leave it running using the CTRL-p CTRL-q key sequence. Let's type that and detach from the container.</p> <p>You can connect to and disconnect from networks any time you wish. Let's try this and disconnect &quot;con1&quot; from bridge network.</p> <p>Type:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">docker</span> network disconnect bridge con1
</code></pre></div><p>Now the con1 is disconnected from bridge network. Attach again to container's shell and check that it's disconnected.</p> <p>Type:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">docker</span> attach con1
</code></pre></div><p>Output will be something like:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>root@bb1dcc608811:/<span class="token comment"># ifconfig</span>
lo: <span class="token assign-left variable">flags</span><span class="token operator">=</span><span class="token number">7</span><span class="token operator"><span class="token file-descriptor important">3</span>&lt;</span>UP,LOOPBACK,RUNNING<span class="token operator">&gt;</span>  mtu <span class="token number">65536</span>
        inet <span class="token number">127.0</span>.0.1  netmask <span class="token number">255.0</span>.0.0
        loop  txqueuelen <span class="token number">1000</span>  <span class="token punctuation">(</span>Local Loopback<span class="token punctuation">)</span>
        RX packets <span class="token number">0</span>  bytes <span class="token number">0</span> <span class="token punctuation">(</span><span class="token number">0.0</span> B<span class="token punctuation">)</span>
        RX errors <span class="token number">0</span>  dropped <span class="token number">0</span>  overruns <span class="token number">0</span>  frame <span class="token number">0</span>
        TX packets <span class="token number">0</span>  bytes <span class="token number">0</span> <span class="token punctuation">(</span><span class="token number">0.0</span> B<span class="token punctuation">)</span>
        TX errors <span class="token number">0</span>  dropped <span class="token number">0</span> overruns <span class="token number">0</span>  carrier <span class="token number">0</span>  collisions <span class="token number">0</span>
</code></pre></div><p>As you can see, only the loopback adapter remains. Let's type CTRL-p CTRL-q and detach from the container again. Delete the containers by typing <code>docker container rm -f con1 con2</code></p></details><p></p> <hr> <p><strong>4: Default networks - Host</strong></p><details><summary>Click to expand!</summary><p></p> <p>Another network that has been created when Docker starts is &quot;host&quot; network. If you attach a container to the &quot;host&quot; network, that container’s network stack is not isolated from Docker host's network stack (container shares the host’s networking namespace), and the container does not get its own IP-address allocated. Let's create another container and connect it to the host network.</p> <p>Type:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">docker</span> container run <span class="token parameter variable">--rm</span> <span class="token parameter variable">--network</span> <span class="token function">host</span> <span class="token parameter variable">--name</span> con3 <span class="token parameter variable">-it</span> ubuntu <span class="token function">bash</span>
</code></pre></div><p>Output will be something like:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>root@docker-desktop:/<span class="token comment">#</span>
</code></pre></div><p>Again we're gonna install ifconfig and ping by typing <code>apt update -y &amp;&amp; apt install -y net-tools iputils-ping</code> . When this is done, type <code>ifconfig</code></p> <p>Type:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>root@docker-desktop:/<span class="token comment"># ifconfig</span>
</code></pre></div><p>Output will be something like:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>docker0: <span class="token assign-left variable">flags</span><span class="token operator">=</span><span class="token number">416</span><span class="token operator"><span class="token file-descriptor important">3</span>&lt;</span>UP,BROADCAST,RUNNING,MULTICAST<span class="token operator">&gt;</span>  mtu <span class="token number">1500</span>
        inet <span class="token number">172.17</span>.0.1  netmask <span class="token number">255.255</span>.0.0  broadcast <span class="token number">172.17</span>.255.255
        inet6 fe80::42:b5ff:fe4d:9a9  prefixlen <span class="token number">64</span>  scopeid 0x2<span class="token operator"><span class="token file-descriptor important">0</span>&lt;</span>link<span class="token operator">&gt;</span>
        ether 02:42:b5:4d:09:a9  txqueuelen <span class="token number">0</span>  <span class="token punctuation">(</span>Ethernet<span class="token punctuation">)</span>
        RX packets <span class="token number">12681</span>  bytes <span class="token number">525430</span> <span class="token punctuation">(</span><span class="token number">525.4</span> KB<span class="token punctuation">)</span>
        RX errors <span class="token number">0</span>  dropped <span class="token number">0</span>  overruns <span class="token number">0</span>  frame <span class="token number">0</span>
        TX packets <span class="token number">27654</span>  bytes <span class="token number">39770860</span> <span class="token punctuation">(</span><span class="token number">39.7</span> MB<span class="token punctuation">)</span>
        TX errors <span class="token number">0</span>  dropped <span class="token number">0</span> overruns <span class="token number">0</span>  carrier <span class="token number">0</span>  collisions <span class="token number">0</span>

eth0: <span class="token assign-left variable">flags</span><span class="token operator">=</span><span class="token number">416</span><span class="token operator"><span class="token file-descriptor important">3</span>&lt;</span>UP,BROADCAST,RUNNING,MULTICAST<span class="token operator">&gt;</span>  mtu <span class="token number">1500</span>
        inet <span class="token number">192.168</span>.65.3  netmask <span class="token number">255.255</span>.255.240  broadcast <span class="token number">192.168</span>.65.15
        inet6 fe80::50:ff:fe00:1  prefixlen <span class="token number">64</span>  scopeid 0x2<span class="token operator"><span class="token file-descriptor important">0</span>&lt;</span>link<span class="token operator">&gt;</span>
        ether 02:50:00:00:00:01  txqueuelen <span class="token number">1000</span>  <span class="token punctuation">(</span>Ethernet<span class="token punctuation">)</span>
        RX packets <span class="token number">229369</span>  bytes <span class="token number">337542126</span> <span class="token punctuation">(</span><span class="token number">337.5</span> MB<span class="token punctuation">)</span>
        RX errors <span class="token number">0</span>  dropped <span class="token number">0</span>  overruns <span class="token number">0</span>  frame <span class="token number">0</span>
        TX packets <span class="token number">65774</span>  bytes <span class="token number">3733334</span> <span class="token punctuation">(</span><span class="token number">3.7</span> MB<span class="token punctuation">)</span>
        TX errors <span class="token number">0</span>  dropped <span class="token number">0</span> overruns <span class="token number">0</span>  carrier <span class="token number">0</span>  collisions <span class="token number">0</span>

lo: <span class="token assign-left variable">flags</span><span class="token operator">=</span><span class="token number">7</span><span class="token operator"><span class="token file-descriptor important">3</span>&lt;</span>UP,LOOPBACK,RUNNING<span class="token operator">&gt;</span>  mtu <span class="token number">65536</span>
        inet <span class="token number">127.0</span>.0.1  netmask <span class="token number">255.0</span>.0.0
        inet6 ::1  prefixlen <span class="token number">128</span>  scopeid 0x1<span class="token operator"><span class="token file-descriptor important">0</span>&lt;</span>host<span class="token operator">&gt;</span>
        loop  txqueuelen <span class="token number">1000</span>  <span class="token punctuation">(</span>Local Loopback<span class="token punctuation">)</span>
        RX packets <span class="token number">1251</span>  bytes <span class="token number">75612</span> <span class="token punctuation">(</span><span class="token number">75.6</span> KB<span class="token punctuation">)</span>
        RX errors <span class="token number">0</span>  dropped <span class="token number">0</span>  overruns <span class="token number">0</span>  frame <span class="token number">0</span>
        TX packets <span class="token number">1251</span>  bytes <span class="token number">75612</span> <span class="token punctuation">(</span><span class="token number">75.6</span> KB<span class="token punctuation">)</span>
        TX errors <span class="token number">0</span>  dropped <span class="token number">0</span> overruns <span class="token number">0</span>  carrier <span class="token number">0</span>  collisions <span class="token number">0</span>

veth9f4c8b5: <span class="token assign-left variable">flags</span><span class="token operator">=</span><span class="token number">416</span><span class="token operator"><span class="token file-descriptor important">3</span>&lt;</span>UP,BROADCAST,RUNNING,MULTICAST<span class="token operator">&gt;</span>  mtu <span class="token number">1500</span>
        inet6 fe80::40f7:4eff:feb1:3cc1  prefixlen <span class="token number">64</span>  scopeid 0x2<span class="token operator"><span class="token file-descriptor important">0</span>&lt;</span>link<span class="token operator">&gt;</span>
        ether <span class="token number">42</span>:f7:4e:b1:3c:c1  txqueuelen <span class="token number">0</span>  <span class="token punctuation">(</span>Ethernet<span class="token punctuation">)</span>
        RX packets <span class="token number">5290</span>  bytes <span class="token number">291759</span> <span class="token punctuation">(</span><span class="token number">291.7</span> KB<span class="token punctuation">)</span>
        RX errors <span class="token number">0</span>  dropped <span class="token number">0</span>  overruns <span class="token number">0</span>  frame <span class="token number">0</span>
        TX packets <span class="token number">10508</span>  bytes <span class="token number">15222922</span> <span class="token punctuation">(</span><span class="token number">15.2</span> MB<span class="token punctuation">)</span>
        TX errors <span class="token number">0</span>  dropped <span class="token number">0</span> overruns <span class="token number">0</span>  carrier <span class="token number">0</span>  collisions <span class="token number">0</span>
</code></pre></div><p>Check the eth0 adapter. It's exactly the same adapter that the host has. So there isn't any network isolation. Container is running like a process on the host and uses network infrastructure of the host without any bridge or something like that in the middle. Type exit and close the connection. Container will be automatically deleted.
</p></details><p></p> <hr> <p><strong>5: Default networks - None</strong></p><details><summary>Click to expand!</summary><p></p> <p>If you want to disable networking stack completely on a container, you can use  --network none flag. Within the container, only the loopback device will be created. Let's try that.</p> <p>Type:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">docker</span> container run <span class="token parameter variable">--rm</span> <span class="token parameter variable">-it</span> <span class="token parameter variable">--network</span> none alpine ash
</code></pre></div><p>Output will be something like:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>/ <span class="token comment">#</span>
</code></pre></div><p>Type:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>/ <span class="token comment"># ip link show</span>
</code></pre></div><p>Output will be something like:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token number">1</span>: lo: <span class="token operator">&lt;</span>LOOPBACK,UP,LOWER_UP<span class="token operator">&gt;</span> mtu <span class="token number">65536</span> qdisc noqueue state UNKNOWN qlen <span class="token number">1000</span>
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
<span class="token number">2</span>: sit0@NONE: <span class="token operator">&lt;</span>NOARP<span class="token operator">&gt;</span> mtu <span class="token number">1480</span> qdisc noop state DOWN qlen <span class="token number">1000</span>
    link/sit <span class="token number">0.0</span>.0.0 brd <span class="token number">0.0</span>.0.0
</code></pre></div><p>As you can see, there isn't any eth device that has been created. This container can't communicate with any endpoint. Type exit, the container will be automatically deleted.
</p></details><p></p> <hr> <p><strong>6: User-defined bridge network</strong></p><details><summary>Click to expand!</summary><p></p> <p>All containers without a --network specified are connected to the default bridge network. This can be a risk, as unrelated stacks/services/containers are then able to communicate. Using a user-defined network provides a scoped network in which only containers attached to that network are able to communicate.
If your containers use the default bridge network, you can configure it, but all the containers use the same settings, such as MTU and iptables rules. In addition, configuring the default bridge network happens outside of Docker itself, and requires a restart of Docker. User-defined bridge networks are created by using <code>docker network create</code> command. If different groups of applications have different network requirements, you can configure each user-defined bridge network separately while creating them. Containers connected to the same user-defined bridge network effectively expose all ports to each other. For a port to be accessible to containers or non-Docker hosts on different networks, that port must be published using the -p or --publish flag which we will come later. For now let's create our first user-defined bridge network.</p> <p>Type:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">docker</span> network create first_network
</code></pre></div><p>Output will be something like:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>6bb87b6c22ea7dceee3cf87367aee2bd9045c1f255d98c4c01cac00ab6478d13
</code></pre></div><p>It has been created. Now it's time to check and see its details.</p> <p>Type:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">docker</span> network <span class="token function">ls</span>
</code></pre></div><p>Output will be something like:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>NETWORK ID          NAME                DRIVER              SCOPE
0a63e660c39f        bridge              bridge              <span class="token builtin class-name">local</span>
6bb87b6c22ea        first_network       bridge              <span class="token builtin class-name">local</span>
a4c8780d68f4        <span class="token function">host</span>                <span class="token function">host</span>                <span class="token builtin class-name">local</span>
3f2520a5781c        none                null                <span class="token builtin class-name">local</span>
</code></pre></div><p>Type:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">docker</span> network inspect first_network
</code></pre></div><p>Output will be something like:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        <span class="token string">&quot;Name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;first_network&quot;</span>,
        <span class="token string">&quot;Id&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;6bb87b6c22ea7dceee3cf87367aee2bd9045c1f255d98c4c01cac00ab6478d13&quot;</span>,
        <span class="token string">&quot;Created&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;2020-08-05T12:12:44.2681958Z&quot;</span>,
        <span class="token string">&quot;Scope&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;local&quot;</span>,
        <span class="token string">&quot;Driver&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;bridge&quot;</span>,
        <span class="token string">&quot;EnableIPv6&quot;</span><span class="token builtin class-name">:</span> false,
        <span class="token string">&quot;IPAM&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;Driver&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;default&quot;</span>,
            <span class="token string">&quot;Options&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>,
            <span class="token string">&quot;Config&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">{</span>
                    <span class="token string">&quot;Subnet&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;172.18.0.0/16&quot;</span>,
                    <span class="token string">&quot;Gateway&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;172.18.0.1&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>,
        <span class="token string">&quot;Internal&quot;</span><span class="token builtin class-name">:</span> false,
        <span class="token string">&quot;Attachable&quot;</span><span class="token builtin class-name">:</span> false,
        <span class="token string">&quot;Ingress&quot;</span><span class="token builtin class-name">:</span> false,
        <span class="token string">&quot;ConfigFrom&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;Network&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>
        <span class="token punctuation">}</span>,
        <span class="token string">&quot;ConfigOnly&quot;</span><span class="token builtin class-name">:</span> false,
        <span class="token string">&quot;Containers&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>,
        <span class="token string">&quot;Options&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>,
        <span class="token string">&quot;Labels&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><p>Again, I want you to notice the Gateway and Subnet section of this output. We've created a user-defined bridge network. We didn't specify any subnet option. That is why it got the next ip block after default bridge network. So subnet is &quot;172.18.0.0/16&quot;. If we create another one, it will get &quot;172.19.0.0/16&quot; and this goes on like that. Let's create 2 containers again and connect them to this newly created network.</p> <p>Type:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">docker</span> container run <span class="token parameter variable">-dit</span> <span class="token parameter variable">--rm</span> <span class="token parameter variable">--name</span> web <span class="token parameter variable">--network</span> first_network busybox <span class="token function">sh</span>
</code></pre></div><p>Output will be something like:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>ad1a7086a97b8ea6acbf203a7df2b17c1d276ffb46464a79b439208a527380e7
</code></pre></div><p>Type:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">docker</span> container run <span class="token parameter variable">-dit</span> <span class="token parameter variable">--rm</span> <span class="token parameter variable">--name</span> database <span class="token parameter variable">--network</span> first_network busybox <span class="token function">sh</span>
</code></pre></div><p>Output will be something like:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>2e93b1d08ac6f35043e417e3e15116ca7100f85020d59b24107805580417ef3b
</code></pre></div><p>2 containers have been created and connected to the <code>first_network</code>. As said before, user-defined bridge networks allow containers to resolve each other's name. We're gonna do that now.</p> <p>Type:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">docker</span> attach web
</code></pre></div><p>Output will be something like:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>/ <span class="token comment">#</span>
</code></pre></div><p>We're connected to &quot;web&quot; container. Let's try to ping &quot;database&quot; container by its name.</p> <p>Type:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">ping</span> <span class="token parameter variable">-c</span> <span class="token number">4</span> database
</code></pre></div><p>Output will be something like:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>PING database <span class="token punctuation">(</span><span class="token number">172.18</span>.0.3<span class="token punctuation">)</span>: <span class="token number">56</span> data bytes
<span class="token number">64</span> bytes from <span class="token number">172.18</span>.0.3: <span class="token assign-left variable">seq</span><span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">64</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">0.104</span> ms
<span class="token number">64</span> bytes from <span class="token number">172.18</span>.0.3: <span class="token assign-left variable">seq</span><span class="token operator">=</span><span class="token number">1</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">64</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">0.117</span> ms
<span class="token number">64</span> bytes from <span class="token number">172.18</span>.0.3: <span class="token assign-left variable">seq</span><span class="token operator">=</span><span class="token number">2</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">64</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">0.158</span> ms
<span class="token number">64</span> bytes from <span class="token number">172.18</span>.0.3: <span class="token assign-left variable">seq</span><span class="token operator">=</span><span class="token number">3</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">64</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">0.069</span> ms

--- database <span class="token function">ping</span> statistics ---
<span class="token number">4</span> packets transmitted, <span class="token number">4</span> packets received, <span class="token number">0</span>% packet loss
round-trip min/avg/max <span class="token operator">=</span> <span class="token number">0.069</span>/0.112/0.158 ms
</code></pre></div><p>As you can see, containers that are connected to the same user-defined bridge network can communicate with each other and resolve each other's name. But let's try to create another container on the default bridge network and try to access this container.</p> <p>Open a second terminal window.
Type:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">docker</span> container run <span class="token parameter variable">-it</span> <span class="token parameter variable">--rm</span> <span class="token parameter variable">--name</span> <span class="token builtin class-name">test</span> busybox <span class="token function">sh</span>
</code></pre></div><p>Output will be something like:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>/ <span class="token comment">#</span>
</code></pre></div><p>&quot;test&quot; container has been created and you're connected to its shell. Try to ping &quot;database&quot; container by its name and ip address.</p> <div class="language-shell extra-class"><pre class="language-shell"><code>/ <span class="token comment"># ping database</span>
ping: bad address <span class="token string">'database'</span>
/ <span class="token comment"># ping -c 4 172.18.0.3</span>
PING <span class="token number">172.18</span>.0.3 <span class="token punctuation">(</span><span class="token number">172.18</span>.0.3<span class="token punctuation">)</span>: <span class="token number">56</span> data bytes

--- <span class="token number">172.18</span>.0.3 <span class="token function">ping</span> statistics ---
<span class="token number">4</span> packets transmitted, <span class="token number">0</span> packets received, <span class="token number">100</span>% packet loss
/ <span class="token comment">#</span>
</code></pre></div><p>You shouldn't have been able to neither resolve its name nor access to this container by its ip address. Containers that are running on different networks can't communicate with each other without exposed ports. Only the containers that are running on the same network can communicate with each other and if they are running on the same user-defined bridge network, they can resolve each other's name too. Close this connection by typing exit and delete other containers too by typing <code>docker container rm -f web database</code></p> <p>As the last part of this exercise, let's create a second bridge network but this time we're gonna specify the subnet and ip ranges.</p> <p>Type:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">docker</span> network create <span class="token parameter variable">--driver</span><span class="token operator">=</span>bridge <span class="token parameter variable">--subnet</span><span class="token operator">=</span><span class="token number">10.10</span>.0.0/16 --ip-range<span class="token operator">=</span><span class="token number">10.10</span>.10.0/24 <span class="token parameter variable">--gateway</span><span class="token operator">=</span><span class="token number">10.10</span>.10.10 second_network 
</code></pre></div><p>Output will be something like:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>34d051989f2a578ba704d5b8019db59fd195a6ba96d53bfd6ceaa7195a854f5b
</code></pre></div><p>Type:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">docker</span> network <span class="token function">ls</span>
</code></pre></div><p>Output will be something like:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>NETWORK ID          NAME                DRIVER              SCOPE
0a63e660c39f        bridge              bridge              <span class="token builtin class-name">local</span>
6bb87b6c22ea        first_network       bridge              <span class="token builtin class-name">local</span>
a4c8780d68f4        <span class="token function">host</span>                <span class="token function">host</span>                <span class="token builtin class-name">local</span>
3f2520a5781c        none                null                <span class="token builtin class-name">local</span>
34d051989f2a        second_network      bridge              <span class="token builtin class-name">local</span>
</code></pre></div></details> <hr> <p><strong>7: Port publishing</strong></p><details><summary>Click to expand!</summary><p></p> <p>By default, when you create a container, it does not publish any of its ports to outside world. To make a port available to clients outside the Docker, or to Docker containers which are not connected to the same network, we use <code>--publish</code> or <code>-p</code> flags. This creates a firewall rule which maps a container port to a port on the Docker host. Any package that reaches to that port on the host will be forwarded to the port that listens on the container. So you can access to services inside the container from outside. Also containers which are not connected to the container’s network can reach this container via that published port. Let's try this. We're gonna create 2 containers connected to 2 different networks. First one will be &quot;web&quot; and will be published TCP Port 80. Other one is just a busybox container that we'll try to connect to &quot;web&quot; container.</p> <p>Type:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$  <span class="token function">docker</span> container run <span class="token parameter variable">-d</span> <span class="token parameter variable">--name</span> webserver <span class="token parameter variable">--network</span> first_network <span class="token parameter variable">-p</span> <span class="token number">5000</span>:80 nginx
</code></pre></div><p>Output will be something like:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>d20a67de0c86993f07dbc0774a883e5d6414693b5fdd9f2b183426bf4a5835c3
</code></pre></div><p>If you open a browser on your computer and visit 127.0.0.1:5000, you will reach to the web daemon which is running inside the container. Somehow, we mapped host's TCP 5000 to containers TCP 80.</p> <img src="/trainingdays/assets/img/nginx2.dc547d8d.png"> <p>Now, let's create a second container and connect that to the <code>second_network</code> and try to reach webserver. But first let's get webserver's ip address. Type <code>docker container inspect webserver</code> and check Ip address section. In my case it's &quot;IPAddress&quot;: &quot;172.18.0.4&quot;. Ok, we are now ready to create the second container.</p> <p>Type:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">docker</span> container run <span class="token parameter variable">--rm</span> <span class="token parameter variable">-it</span> <span class="token parameter variable">--name</span> test_container <span class="token parameter variable">--network</span> second_network centos <span class="token function">sh</span>
</code></pre></div><p>Output will be something like:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>sh-4.4<span class="token comment">#</span>
</code></pre></div><p>Let's try to reach webserver. We're gonna use curl and try to access 172.18.0.4:80.</p> <p>Type:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ sh-4.4<span class="token comment"># curl 172.18.0.4:80</span>
</code></pre></div><p>Output will be something like:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>curl: <span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span> Failed to connect to <span class="token number">172.18</span>.0.4 port <span class="token number">80</span>: Connection timed out
</code></pre></div><p>We got a &quot;connection time-out&quot; message. Because we were trying to reach a container which is connected to another network. Remember that, containers that are running on different networks can't communicate with each other. Instead of that, if we try to reach 172.18.0.1 &quot;which is the gateway of the first_network&quot; on port 5000 we can reach to the container. Because, we have exposed that port.</p> <p>Type:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ sh-4.4<span class="token comment"># curl 172.18.0.1:5000</span>
</code></pre></div><p>Output will be something like:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token operator">&lt;</span><span class="token operator">!</span>DOCTYPE html<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>html<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Welcome to nginx<span class="token operator">!</span><span class="token operator">&lt;</span>/title<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>style<span class="token operator">&gt;</span>
    body <span class="token punctuation">{</span>
        width: 35em<span class="token punctuation">;</span>
        margin: <span class="token number">0</span> auto<span class="token punctuation">;</span>
        font-family: Tahoma, Verdana, Arial, sans-serif<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token operator">&lt;</span>/style<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/head<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>h<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span>Welcome to nginx<span class="token operator">!</span><span class="token operator">&lt;</span>/h<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span>
<span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>If you see this page, the nginx web server is successfully installed and
working. Further configuration is required.<span class="token operator">&lt;</span>/p<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>For online documentation and support please refer to
<span class="token operator">&lt;</span>a <span class="token assign-left variable">href</span><span class="token operator">=</span><span class="token string">&quot;http://nginx.org/&quot;</span><span class="token operator">&gt;</span>nginx.org<span class="token operator">&lt;</span>/a<span class="token operator">&gt;</span>.<span class="token operator">&lt;</span>br/<span class="token operator">&gt;</span>
Commercial support is available at
<span class="token operator">&lt;</span>a <span class="token assign-left variable">href</span><span class="token operator">=</span><span class="token string">&quot;http://nginx.com/&quot;</span><span class="token operator">&gt;</span>nginx.com<span class="token operator">&lt;</span>/a<span class="token operator">&gt;</span>.<span class="token operator">&lt;</span>/p<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token operator">&lt;</span>em<span class="token operator">&gt;</span>Thank you <span class="token keyword">for</span> using nginx.<span class="token operator">&lt;</span>/em<span class="token operator">&gt;</span><span class="token operator">&lt;</span>/p<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/html<span class="token operator">&gt;</span>
</code></pre></div><p>Type exit and container will be automatically deleted.</p> <p>P.S. <code>-p 8080:80/udp</code> you can also expose udp ports like that.</p> <p>Let's delete other containers and networks that we've created so far.</p> <p>Type:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">docker</span> container <span class="token function">rm</span> <span class="token parameter variable">-f</span> webserver database
</code></pre></div><p>Type:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">docker</span> network <span class="token function">rm</span> first_network second_network
</code></pre></div></details> <hr> <h2 id="wrap-up"><a href="#wrap-up" class="header-anchor">#</a> Wrap up</h2> <p><strong>Congratulations</strong> you have completed the Docker Objects challenge and learned how to create and manage Docker Volume and Network objects.</p> <p>*** Reference: https://docs.docker.com</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/azuredevcollege/trainingdays/edit/master/day6/challenges/challenge3.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/trainingdays/assets/js/app.7ee90653.js" defer></script><script src="/trainingdays/assets/js/3.bac66e4c.js" defer></script><script src="/trainingdays/assets/js/64.608921b5.js" defer></script>
  </body>
</html>
