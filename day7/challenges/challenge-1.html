<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Challenge 1: Create your first Kubernetes Cluster | Azure Developer College</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/trainingdays/assets/css/0.styles.8d7a09fd.css" as="style"><link rel="preload" href="/trainingdays/assets/js/app.7ee90653.js" as="script"><link rel="preload" href="/trainingdays/assets/js/3.bac66e4c.js" as="script"><link rel="preload" href="/trainingdays/assets/js/38.ba3ea198.js" as="script"><link rel="prefetch" href="/trainingdays/assets/js/10.e245022a.js"><link rel="prefetch" href="/trainingdays/assets/js/11.e575ca81.js"><link rel="prefetch" href="/trainingdays/assets/js/12.4af6743d.js"><link rel="prefetch" href="/trainingdays/assets/js/13.0b26a6a5.js"><link rel="prefetch" href="/trainingdays/assets/js/14.2d92fef8.js"><link rel="prefetch" href="/trainingdays/assets/js/15.a191ca69.js"><link rel="prefetch" href="/trainingdays/assets/js/16.405c54e2.js"><link rel="prefetch" href="/trainingdays/assets/js/17.43731ef2.js"><link rel="prefetch" href="/trainingdays/assets/js/18.2984f726.js"><link rel="prefetch" href="/trainingdays/assets/js/19.a9d0edc3.js"><link rel="prefetch" href="/trainingdays/assets/js/2.0be5b509.js"><link rel="prefetch" href="/trainingdays/assets/js/20.7cffd4b4.js"><link rel="prefetch" href="/trainingdays/assets/js/21.e7fe4a64.js"><link rel="prefetch" href="/trainingdays/assets/js/22.9b14db9d.js"><link rel="prefetch" href="/trainingdays/assets/js/23.441bbca6.js"><link rel="prefetch" href="/trainingdays/assets/js/24.9c4549d9.js"><link rel="prefetch" href="/trainingdays/assets/js/25.5746a249.js"><link rel="prefetch" href="/trainingdays/assets/js/26.b54d0910.js"><link rel="prefetch" href="/trainingdays/assets/js/27.17fc5e8f.js"><link rel="prefetch" href="/trainingdays/assets/js/28.dc06e268.js"><link rel="prefetch" href="/trainingdays/assets/js/29.2c678e32.js"><link rel="prefetch" href="/trainingdays/assets/js/30.da2d71da.js"><link rel="prefetch" href="/trainingdays/assets/js/31.2d6231d3.js"><link rel="prefetch" href="/trainingdays/assets/js/32.de802251.js"><link rel="prefetch" href="/trainingdays/assets/js/33.e1098fb7.js"><link rel="prefetch" href="/trainingdays/assets/js/34.b6d29e40.js"><link rel="prefetch" href="/trainingdays/assets/js/35.4c61bb7b.js"><link rel="prefetch" href="/trainingdays/assets/js/36.336fcd60.js"><link rel="prefetch" href="/trainingdays/assets/js/37.772f2fe7.js"><link rel="prefetch" href="/trainingdays/assets/js/39.52fb19ee.js"><link rel="prefetch" href="/trainingdays/assets/js/4.d015fbd5.js"><link rel="prefetch" href="/trainingdays/assets/js/40.354e399e.js"><link rel="prefetch" href="/trainingdays/assets/js/41.ec595a2b.js"><link rel="prefetch" href="/trainingdays/assets/js/42.48bed577.js"><link rel="prefetch" href="/trainingdays/assets/js/43.11938683.js"><link rel="prefetch" href="/trainingdays/assets/js/44.acddabd3.js"><link rel="prefetch" href="/trainingdays/assets/js/45.a2916451.js"><link rel="prefetch" href="/trainingdays/assets/js/46.95911633.js"><link rel="prefetch" href="/trainingdays/assets/js/47.c267ffc1.js"><link rel="prefetch" href="/trainingdays/assets/js/48.37cfbfe4.js"><link rel="prefetch" href="/trainingdays/assets/js/49.9fc08260.js"><link rel="prefetch" href="/trainingdays/assets/js/5.66f1ef82.js"><link rel="prefetch" href="/trainingdays/assets/js/50.f621e07d.js"><link rel="prefetch" href="/trainingdays/assets/js/51.e77f724a.js"><link rel="prefetch" href="/trainingdays/assets/js/52.c0052e39.js"><link rel="prefetch" href="/trainingdays/assets/js/53.2fe21a43.js"><link rel="prefetch" href="/trainingdays/assets/js/54.6d6dd706.js"><link rel="prefetch" href="/trainingdays/assets/js/55.de3427a7.js"><link rel="prefetch" href="/trainingdays/assets/js/56.357453fe.js"><link rel="prefetch" href="/trainingdays/assets/js/57.2b8c0b9b.js"><link rel="prefetch" href="/trainingdays/assets/js/58.34c86dce.js"><link rel="prefetch" href="/trainingdays/assets/js/59.20afb7e5.js"><link rel="prefetch" href="/trainingdays/assets/js/6.bd3d8f89.js"><link rel="prefetch" href="/trainingdays/assets/js/60.cf52ab3d.js"><link rel="prefetch" href="/trainingdays/assets/js/61.b7ff488e.js"><link rel="prefetch" href="/trainingdays/assets/js/62.2451e01f.js"><link rel="prefetch" href="/trainingdays/assets/js/63.d86a5b86.js"><link rel="prefetch" href="/trainingdays/assets/js/64.608921b5.js"><link rel="prefetch" href="/trainingdays/assets/js/65.d90b3114.js"><link rel="prefetch" href="/trainingdays/assets/js/66.49c6fbd9.js"><link rel="prefetch" href="/trainingdays/assets/js/67.4f60f26b.js"><link rel="prefetch" href="/trainingdays/assets/js/68.208402a2.js"><link rel="prefetch" href="/trainingdays/assets/js/69.a980b450.js"><link rel="prefetch" href="/trainingdays/assets/js/7.fc9a0f7c.js"><link rel="prefetch" href="/trainingdays/assets/js/70.cf4f53b8.js"><link rel="prefetch" href="/trainingdays/assets/js/71.55c061b2.js"><link rel="prefetch" href="/trainingdays/assets/js/72.7cc4b8ba.js"><link rel="prefetch" href="/trainingdays/assets/js/73.71f272fd.js"><link rel="prefetch" href="/trainingdays/assets/js/74.d9324332.js"><link rel="prefetch" href="/trainingdays/assets/js/75.22202aba.js"><link rel="prefetch" href="/trainingdays/assets/js/76.79e1fda3.js"><link rel="prefetch" href="/trainingdays/assets/js/77.09f6ecf5.js"><link rel="prefetch" href="/trainingdays/assets/js/78.40383fd1.js"><link rel="prefetch" href="/trainingdays/assets/js/79.c5447221.js"><link rel="prefetch" href="/trainingdays/assets/js/8.45342290.js"><link rel="prefetch" href="/trainingdays/assets/js/80.5cf25ae5.js"><link rel="prefetch" href="/trainingdays/assets/js/81.e3653e94.js"><link rel="prefetch" href="/trainingdays/assets/js/82.e34ef379.js"><link rel="prefetch" href="/trainingdays/assets/js/83.a86bfa1d.js"><link rel="prefetch" href="/trainingdays/assets/js/84.147161c7.js"><link rel="prefetch" href="/trainingdays/assets/js/85.ee46661f.js"><link rel="prefetch" href="/trainingdays/assets/js/86.b933c088.js"><link rel="prefetch" href="/trainingdays/assets/js/87.0b4539ef.js"><link rel="prefetch" href="/trainingdays/assets/js/9.235ee99d.js">
    <link rel="stylesheet" href="/trainingdays/assets/css/0.styles.8d7a09fd.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/trainingdays/" class="home-link router-link-active"><!----> <span class="site-name">Azure Developer College</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/azuredevcollege/trainingdays" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/azuredevcollege/trainingdays" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/trainingdays/" aria-current="page" class="sidebar-link">Home</a></li><li><a href="/trainingdays/day1/" class="sidebar-link">Day 1 Azure Fundamentals &amp; Infrastructure</a></li><li><a href="/trainingdays/day2/" class="sidebar-link">Day 2 Azure Development</a></li><li><a href="/trainingdays/day3/" class="sidebar-link">Day 3 Data and AI</a></li><li><a href="/trainingdays/day4/" class="sidebar-link">Day 4 DevOps and Monitoring</a></li><li><a href="/trainingdays/day5/" class="sidebar-link">Day 5 Identity and Architecture</a></li><li><a href="/trainingdays/day6/" class="sidebar-link">Day 6 Containerization</a></li><li><a href="/trainingdays/day7/" aria-current="page" class="sidebar-link">Day 7 Kubernetes</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="challenge-1-create-your-first-kubernetes-cluster"><a href="#challenge-1-create-your-first-kubernetes-cluster" class="header-anchor">#</a> Challenge 1: Create your first Kubernetes Cluster</h1> <h2 id="here-is-what-you-will-learn-üéØ"><a href="#here-is-what-you-will-learn-üéØ" class="header-anchor">#</a> Here is what you will learn üéØ</h2> <p>In this challenge we will create a Kubernetes cluster. To achieve this so we will:</p> <ul><li>Use the Azure CLI</li> <li>Configure your local access credentials to control your cluster using kubectl</li> <li>Take some first steps</li> <li>Run our first pod</li></ul> <h2 id="table-of-contents"><a href="#table-of-contents" class="header-anchor">#</a> Table Of Contents</h2> <ol><li><a href="#create-the-cluster">Create the cluster</a></li> <li><a href="#establish-access-to-the-cluster">Establish Access to the Cluster</a></li> <li><a href="#access-the-dashboard">Access the Dashboard</a></li> <li><a href="#run-your-first-pod">Run your First Pod</a></li></ol> <h2 id="create-the-cluster"><a href="#create-the-cluster" class="header-anchor">#</a> Create the cluster</h2> <p>To have a clean overview of what is being provisioned under the hood, we create a new resource
group and and create our Kubernetes cluster within it:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>az group create <span class="token parameter variable">--name</span> adc-aks-rg <span class="token parameter variable">--location</span> westeurope
az aks create --resource-group adc-aks-rg <span class="token parameter variable">--name</span> adc-cluster --enable-managed-identity --generate-ssh-keys --kubernetes-version <span class="token number">1.22</span>.6
</code></pre></div><p>Let's inspect the created resources:</p> <p><img src="/trainingdays/assets/img/rg-created.6f8a203d.png" alt="Created resource groups"></p> <p>The <code>az aks create</code> command created a second resource group named
<code>MC_adc-aks-rg_adc-cluster_westeurope</code> containing all resources provisioned for our AKS
cluster:</p> <p><img src="/trainingdays/assets/img/cluster-rg.d29bea96.png" alt="Resource group with AKS resource"></p> <p>The resource group we explicitly created only holds the AKS resource <em>per se</em>:</p> <p><img src="/trainingdays/assets/img/auto-rg.db7f5b11.png" alt="Automatically created resource group"></p> <p>All other resource for the cluster are created in its own resource group.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>üìù This resource group and all its resources will be deleted when the cluster is destroyed.</p></div> <h2 id="establish-access-to-the-cluster"><a href="#establish-access-to-the-cluster" class="header-anchor">#</a> Establish Access to the Cluster</h2> <p>Now it's time to access our cluster. To authenticate us against the cluster Kubernetes uses <em>client
certificates</em> and <em>access tokens</em>.</p> <p>To obtain these access credentials for our newly created cluster we
use the <code>az aks get-credentials</code> command:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ az aks get-credentials --resource-group adc-aks-rg <span class="token parameter variable">--name</span> adc-cluster
Merged <span class="token string">&quot;adc-cluster&quot;</span> as current context <span class="token keyword">in</span> /home/waltken/.kube/config

$ kubectl version <span class="token comment"># check client and server version of kubernetes</span>
Client Version: version.Info<span class="token punctuation">{</span>Major:<span class="token string">&quot;1&quot;</span>, Minor:<span class="token string">&quot;20&quot;</span>, GitVersion:<span class="token string">&quot;v1.20.2&quot;</span>, GitCommit:<span class="token string">&quot;faecb196815e248d3ecfb03c680a4507229c2a56&quot;</span>, GitTreeState:<span class="token string">&quot;clean&quot;</span>, BuildDate:<span class="token string">&quot;2021-01-14T18:56:46Z&quot;</span>, GoVersion:<span class="token string">&quot;go1.15.6&quot;</span>, Compiler:<span class="token string">&quot;gc&quot;</span>, Platform:<span class="token string">&quot;linux/amd64&quot;</span><span class="token punctuation">}</span>
Server Version: version.Info<span class="token punctuation">{</span>Major:<span class="token string">&quot;1&quot;</span>, Minor:<span class="token string">&quot;19&quot;</span>, GitVersion:<span class="token string">&quot;v1.19.7&quot;</span>, GitCommit:<span class="token string">&quot;14f897abdc7b57f0850da68bd5959c9ee14ce2fe&quot;</span>, GitTreeState:<span class="token string">&quot;clean&quot;</span>, BuildDate:<span class="token string">&quot;2021-01-22T17:29:38Z&quot;</span>, GoVersion:<span class="token string">&quot;go1.15.5&quot;</span>, Compiler:<span class="token string">&quot;gc&quot;</span>, Platform:<span class="token string">&quot;linux/amd64&quot;</span><span class="token punctuation">}</span>
</code></pre></div><p><code>kubectl version</code> prints both the version of the locally running command line tool as well as the
Kubernetes version running on our cluster.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>üìù To inspect the access credentials and cluster
configuration stored for us in our <code>~/.kube/config</code> file run <code>kubectl config view</code>.</p></div> <p>We've setup access to our Kubernetes cluster. Now we can start exploring and working with our
cluster.</p> <h2 id="access-the-dashboard"><a href="#access-the-dashboard" class="header-anchor">#</a> Access the Dashboard</h2> <p>AKS no longer comes with the kubernetes-dashboard installed by default. Lucky
for us there is a one-liner to quickly install the dashboard into our
cluster:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>kubectl apply <span class="token parameter variable">-f</span> https://raw.githubusercontent.com/kubernetes/dashboard/v2.5.0/aio/deploy/recommended.yaml
</code></pre></div><p>Now, accessing the dashboard requires us to create a <code>ServiceAccount</code> with the
<em>cluster-admin</em> <code>ClusterRole</code>.</p> <p>To create these <code>Resources</code> within our Kubernetes cluster we will first declare the desired
configuration for our <code>ServiceAccount</code> in a YAML file and apply the desired configuration to our
cluster using the <code>kubectl apply</code> command:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token comment"># dashboard-admin.yaml</span>

<span class="token comment"># Create a ServiceAccount that we can use to access the Dashboard</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> ServiceAccount
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> admin<span class="token punctuation">-</span>user <span class="token comment"># Create a ServiceAccount named admin-user</span>
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> kubernetes<span class="token punctuation">-</span>dashboard

<span class="token comment"># This separates multiple resource definitions in a single file</span>
<span class="token punctuation">---</span>
<span class="token comment"># Bind the cluster-admin ClusterRole to the admin-user ServiceAccount</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> rbac.authorization.k8s.io/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> ClusterRoleBinding
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> admin<span class="token punctuation">-</span>user
<span class="token key atrule">roleRef</span><span class="token punctuation">:</span>
  <span class="token key atrule">apiGroup</span><span class="token punctuation">:</span> rbac.authorization.k8s.io
  <span class="token key atrule">kind</span><span class="token punctuation">:</span> ClusterRole
  <span class="token key atrule">name</span><span class="token punctuation">:</span> cluster<span class="token punctuation">-</span>admin
<span class="token key atrule">subjects</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">kind</span><span class="token punctuation">:</span> ServiceAccount
    <span class="token key atrule">name</span><span class="token punctuation">:</span> admin<span class="token punctuation">-</span>user
    <span class="token key atrule">namespace</span><span class="token punctuation">:</span> kubernetes<span class="token punctuation">-</span>dashboard
</code></pre></div><p>Create a new <code>dashboard-admin.yaml</code> file and paste the above content.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>üìù You will be creating lots of YAML files today - hooray! üòÉ Create a folder called <code>yaml</code> in the root directory of your repo and save all files you create within this directory. You can apply the manifests via kubectl from the folder.</p></div> <p>We can apply the configuration via:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ kubectl apply <span class="token parameter variable">-f</span> dashboard-admin.yaml
serviceaccount/admin-user created
clusterrolebinding.rbac.authorization.k8s.io/admin-user created
</code></pre></div><p>We need to discover the created users secret access token, to gain access to the dashboard:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ kubectl <span class="token parameter variable">-n</span> kubernetes-dashboard get secret
NAME                               TYPE                                  DATA   AGE
admin-user-token-22554             kubernetes.io/service-account-token   <span class="token number">3</span>      32s
default-token-8fjcr                kubernetes.io/service-account-token   <span class="token number">3</span>      76s
kubernetes-dashboard-certs         Opaque                                <span class="token number">0</span>      76s
kubernetes-dashboard-csrf          Opaque                                <span class="token number">1</span>      76s
kubernetes-dashboard-key-holder    Opaque                                <span class="token number">2</span>      75s
kubernetes-dashboard-token-zmvj4   kubernetes.io/service-account-token   <span class="token number">3</span>      76s
</code></pre></div><p>Find the secret that belongs to the <code>admin-user-token</code> and use <code>kubectl describe</code> to see the content of the secret:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ kubectl <span class="token parameter variable">-n</span> kubernetes-dashboard describe secret admin-user-token-smw2j
Name:         admin-user-token-22554
Namespace:    kubernetes-dashboard
Labels:       <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
Annotations:  kubernetes.io/service-account.name: admin-user
              kubernetes.io/service-account.uid: 02a8e2e7-c25d-48a2-b8b8-f6ce99e77a5d

Type:  kubernetes.io/service-account-token

Data
<span class="token operator">==</span><span class="token operator">==</span>
ca.crt:     <span class="token number">1765</span> bytes
namespace:  <span class="token number">20</span> bytes
token:      XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>‚ö†Ô∏è Watch out! You token will have a different random 5 character suffix.</p></div> <p>Copy the token to your clipboard for the next step.</p> <p>Now we start the kubernetes proxy to access the remote API safely on our local machine:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ kubectl proxy
Starting to serve on <span class="token number">127.0</span>.0.1:8001
</code></pre></div><p>The process keeps running until you interrupt it using <code>Ctrl-C</code>. Let's keep it running for now.</p> <p><a href="http://localhost:8001/api/v1/namespaces/kubernetes-dashboard/services/https:kubernetes-dashboard:/proxy/" target="_blank" rel="noopener noreferrer">Access the dashboard<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>
and login using the token you've acquired for the <em>admin-user</em> <code>ServiceAccount</code>.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>‚ö†Ô∏è Please note that the dashboard is proxied under a path containing the namespace and deployment path like this: <a href="http://localhost:8001/api/v1/namespaces/kubernetes-dashboard/services/https:kubernetes-dashboard:/proxy/" target="_blank" rel="noopener noreferrer">http://localhost:8001/api/v1/namespaces/kubernetes-dashboard/services/https:kubernetes-dashboard:/proxy/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <p><img src="/trainingdays/assets/img/dashboard-login.fe616b47.png" alt="Dashboard Login"></p> <p>Take your time to explore the dashboard. Make use of the <code>Namespace</code> selector to navigate the
different namespaces.</p> <p><img src="/trainingdays/assets/img/all-namespaces-dashboard.1e83fb32.png" alt="Dashboard Overview"></p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>‚ö†Ô∏è <strong>Security Note:</strong> The dashboard component is considered a &quot;security risk&quot;, because it is an additional way to access your cluster - and you have to take care of securing it.</p> <p>Normally, you would not install the dashboard component in production clusters. There is an option for disabling the dashboard, even after installation: <code>az aks disable-addons -a kube-dashboard -n my_cluster_name -g my_cluster_resource_group</code>.</p></div> <h2 id="run-your-first-pod"><a href="#run-your-first-pod" class="header-anchor">#</a> Run your First Pod</h2> <p>Now we will run our <em>first pod</em> on our kubernetes cluster. Let's keep the <code>kubectl proxy</code> command running and execute this in new tab in your console.</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ kubectl run <span class="token parameter variable">-i</span> <span class="token parameter variable">-t</span> pod1 <span class="token parameter variable">--image</span><span class="token operator">=</span>busybox <span class="token parameter variable">--restart</span><span class="token operator">=</span>Never <span class="token parameter variable">--rm</span><span class="token operator">=</span>true
If you don't see a <span class="token builtin class-name">command</span> prompt, try pressing enter.
/ <span class="token comment">#</span>
</code></pre></div><p>We've just started a <code>Pod</code> named <em>pod1</em> based on the <em>busybox</em> image.</p> <p>To understand the different flags we've added to the command take a look at the built in documentation to <code>kubectl run</code>.</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ kubectl run <span class="token parameter variable">--help</span>
Create and run a particular image <span class="token keyword">in</span> a pod.

Examples:
  <span class="token comment"># Start a nginx pod.</span>
  kubectl run nginx <span class="token parameter variable">--image</span><span class="token operator">=</span>nginx

<span class="token punctuation">..</span>.
</code></pre></div><blockquote><p>‚ùî <strong>Question</strong>: What do the different flags (<code>-i</code>, <code>-t</code>, <code>--restart=Never</code>, <code>--rm=True</code>) used in the <code>kubectl run</code> command do?</p></blockquote> <p><a href="/trainingdays/day7/challenges/challenge-0.html">‚óÄ Previous challenge</a> | <a href="/trainingdays/day7/" class="router-link-active">üîº Day 7</a> | <a href="/trainingdays/day7/challenges/challenge-2.html">Next challenge ‚ñ∂</a></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/azuredevcollege/trainingdays/edit/master/day7/challenges/challenge-1.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/trainingdays/assets/js/app.7ee90653.js" defer></script><script src="/trainingdays/assets/js/3.bac66e4c.js" defer></script><script src="/trainingdays/assets/js/38.ba3ea198.js" defer></script>
  </body>
</html>
